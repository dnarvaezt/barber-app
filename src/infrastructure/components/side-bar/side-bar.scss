@use '../../assets/styles/variables' as v;

.side-bar {
  &__overlay {
    @apply fixed inset-0 z-20 lg:hidden transition-opacity duration-300;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(4px);
  }

  &__container {
    @apply fixed top-0 left-0 z-30 h-full w-64 transform transition-transform duration-300 ease-in-out;
    background: v.$notion-bg-sidebar;
    border-right: 1px solid v.$notion-border-primary;

    .dark & {
      background: v.$notion-dark-bg-sidebar;
      border-color: v.$notion-dark-border-primary;
    }
  }

  &__container--open {
    @apply translate-x-0;
  }

  &__container--closed {
    @apply -translate-x-full lg:translate-x-0;
  }

  &__header {
    @apply flex items-center h-14 px-4;
    background: v.$notion-bg-sidebar;
    border-bottom: 1px solid v.$notion-border-primary;

    .dark & {
      background: v.$notion-dark-bg-sidebar;
      border-color: v.$notion-dark-border-primary;
    }
  }

  &__header-content {
    @apply flex items-center space-x-3 flex-1 min-w-0;
  }

  &__logo {
    @apply w-6 h-6 rounded-lg flex items-center justify-center;
    background: v.$notion-accent-blue;
  }

  &__title {
    @apply font-semibold text-sm truncate;
    color: v.$notion-text-primary;

    .dark & {
      color: v.$notion-dark-text-primary;
    }
  }

  &__close-button {
    @apply lg:hidden ml-2 transition-colors duration-150 flex items-center justify-center h-9 w-9;
    padding: 0.5rem;
    border-radius: 0.375rem;
    color: v.$notion-text-tertiary;
    min-height: 0;

    &:hover {
      color: v.$notion-text-primary;
      background: v.$notion-bg-hover;
    }

    .dark & {
      color: v.$notion-dark-text-tertiary;

      &:hover {
        color: v.$notion-dark-text-primary;
        background: v.$notion-dark-bg-hover;
      }
    }
  }

  &__content {
    @apply flex flex-col h-full;
  }

  &__navigation {
    @apply flex-1 px-3 py-4 space-y-1 overflow-y-auto;
  }

  &__footer {
    @apply px-4 py-3;
    background: v.$notion-bg-sidebar;
    border-top: 1px solid v.$notion-border-primary;

    .dark & {
      background: v.$notion-dark-bg-sidebar;
      border-color: v.$notion-dark-border-primary;
    }
  }

  &__version {
    @apply text-xs text-center font-medium;
    color: v.$notion-text-tertiary;

    .dark & {
      color: v.$notion-dark-text-tertiary;
    }
  }
}

.side-bar-item {
  &__container {
    @apply flex items-center justify-between text-sm font-normal transition-colors duration-150 cursor-pointer;
    padding: 0.5rem 0.75rem;
    border-radius: 0.375rem;
    margin: 0.125rem 0;
  }

  &__container--nested {
    @apply ml-2;
  }

  &__container--active {
    background: rgba(46, 170, 220, 0.1);
    color: v.$notion-accent-blue;
    border-right: 2px solid v.$notion-accent-blue;

    .dark & {
      background: rgba(46, 170, 220, 0.15);
      color: v.$notion-accent-blue;
      border-color: v.$notion-accent-blue;
    }
  }

  &__container--inactive {
    color: v.$notion-text-primary;

    &:hover {
      background: v.$notion-bg-hover;
      color: v.$notion-text-primary;
    }

    .dark & {
      color: v.$notion-dark-text-primary;

      &:hover {
        background: v.$notion-dark-bg-hover;
        color: v.$notion-dark-text-primary;
      }
    }
  }

  &__content {
    @apply flex items-center space-x-3 flex-1 min-w-0;
  }

  &__icon {
    @apply flex-shrink-0 w-4 h-4;
  }

  &__icon--active {
    color: v.$notion-accent-blue;

    .dark & {
      color: v.$notion-accent-blue;
    }
  }

  &__icon--inactive {
    color: v.$notion-text-secondary;

    .dark & {
      color: v.$notion-dark-text-secondary;
    }
  }

  &__link {
    @apply flex-1 truncate;
  }

  &__text {
    @apply flex-1 text-left pl-1 truncate;
  }

  &__expand-button {
    @apply flex-shrink-0 ml-2 p-1 rounded transition-colors duration-150;
  }

  &__expand-button--active {
    color: v.$notion-accent-blue;

    &:hover {
      background: rgba(46, 170, 220, 0.1);
    }

    .dark & {
      color: v.$notion-accent-blue;

      &:hover {
        background: rgba(46, 170, 220, 0.15);
      }
    }
  }

  &__expand-button--inactive {
    color: v.$notion-text-tertiary;

    &:hover {
      color: v.$notion-text-primary;
      background: v.$notion-bg-hover;
    }

    .dark & {
      color: v.$notion-dark-text-tertiary;

      &:hover {
        color: v.$notion-dark-text-primary;
        background: v.$notion-dark-bg-hover;
      }
    }
  }

  &__children {
    @apply mt-1 ml-3;
    border-left: 1px solid v.$notion-border-secondary;

    .dark & {
      border-color: v.$notion-dark-border-secondary;
    }
  }

  &__link,
  &__button {
    @apply flex items-center justify-between w-full;
    padding: 0.5rem 0.75rem;
  }
}
